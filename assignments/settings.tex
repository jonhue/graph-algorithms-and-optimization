%--------Packages--------
\usepackage{makecell}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{bbm}
\usepackage{nicefrac}
\usepackage{enumitem}
\usepackage{cleveref}
\usepackage[italic]{derivative}
\usepackage{todonotes}

\bibliographystyle{plain}

%--------Label sections & subsections-------------
\setcounter{secnumdepth}{2}
% \renewcommand{\thesubsection}{\thesection.\Alph{subsection}}

%--------Theorem Environments--------
\newtheorem{thm}{Theorem}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{clm}[thm]{Claim}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}

\theoremstyle{remark}
\newtheorem{rmk}[thm]{Remark}

%--------Margin Tags-------------
\newcommand{\safefootnote}[1]{\footnotemark \margintag{\textsuperscript{\tiny\arabic{footnote}} #1}}
\let\marginnote\relax
\usepackage{marginnote}
\newcommand{\margintag}[1]{
    \checkoddpage
    \ifoddpage
      {\marginnote{\footnotesize #1}}
    \else
      {\reversemarginpar\marginnote{\footnotesize #1}}
    \fi}

%--------Allow page breaks in align-------------
\allowdisplaybreaks

%--------Enumerations-------------
\setenumerate{label=(\arabic*),noitemsep,topsep=0pt,leftmargin=20pt}

%--------Pseudocode--------
\usepackage{xcolor,amsmath}
\usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\DontPrintSemicolon
\makeatletter
    \let\c@algocf\c@thm
\makeatother
\crefname{algocf}{alg.}{algs.}
\Crefname{algocf}{Algorithm}{Algorithms}
\SetAlgoSkip{bigskip}

% Define pseudocode formatting
\renewcommand{\KwSty}[1]{\textnormal{\textcolor{blue!90!black}{\ttfamily\bfseries #1}}\unskip}
\renewcommand{\ArgSty}[1]{\textnormal{\ttfamily #1}\unskip}
\SetKwComment{Comment}{\color{green!50!black}// }{}
\renewcommand{\CommentSty}[1]{\textnormal{\ttfamily\color{green!50!black}#1}\unskip}
\newcommand{\assign}{\leftarrow}
\newcommand{\var}{\texttt}
\newcommand{\FuncCall}[2]{\texttt{\bfseries #1(#2)}}
\SetKwProg{Function}{function}{}{}
\renewcommand{\ProgSty}[1]{\texttt{\bfseries #1}}
\SetKwBlock{RepeatForever}{repeat}{}